<div *ngIf="loaded; else loading">
  <ul *ngIf="loaded && length; else emptyList">
    <li *ngFor="let reservation of reservations">
      <div class="reservation">
        <div class="flex">
          <div class="image">
            <img
              src="{{ reservation.offer_details.thumbnail_url }}"
              alt="obrazek"
            />
          </div>
          <div class="details">
            <p>Dokąd:</p>
            <p>Przyjazd:</p>
            <p>Wyjazd:</p>
            <p>Hotel:</p>
            <p>Koszt rezerwacji:</p>
            <p>Stan rezerwacji:</p>
            <p *ngIf="reservation.state === 'rejected'">Powód odrzucenia:</p>
            <button
              *ngIf="reservation.state !== 'rejected'"
              mat-raised-button
              (click)="
                navigateToReservation(reservation.id, reservation.offer_id)
              "
            >
              Zobacz
            </button>

            <button
              *ngIf="reservation.state === 'accepted'"
              mat-raised-button
              (click)="payForReservation(reservation.id)"
            >
              Zapłać
            </button>

            <button
              *ngIf="reservation.state === 'rejected'"
              mat-raised-button
              (click)="deleteReservation(reservation.id)"
            >
              Usuń
            </button>
          </div>
          <div class="data">
            <p>
              {{ reservation.offer_details.country }},
              {{ reservation.offer_details.city }}
            </p>
            <p>{{ reservation.offer_details.arrival_date }}</p>
            <p>{{ reservation.offer_details.departure_date }}</p>
            <p>{{ reservation.offer_details.hotel }}</p>
            <p>{{ reservation.price }} PLN</p>
            <p>{{ reservation.state }}</p>
            <p *ngIf="reservation.state === 'rejected'">
              {{ reservation.rejection_reason }}
            </p>
          </div>
        </div>
      </div>
    </li>
  </ul>
</div>
<ng-template #loading>
  <mat-spinner></mat-spinner>
</ng-template>

<ng-template #emptyList>
  <h2 style="text-align: center">Brak rezerwacji</h2>
</ng-template>
