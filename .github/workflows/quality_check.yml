name: Check Code Quality

on:
  pull_request:
    branches: [ main ]

jobs:
  prettier:
    name: Prettier
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      - name: Install dependencies
        run: npm ci

      - name: Check code formatting
        run: npx prettier --check "**/*.{js,jsx,ts,tsx}"

      - name: Comment on Pull Request
        uses: unsplash/comment-on-pr@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          message: |
            #### :memo: Code Formatting Check

            | Status | Message |
            | --- | --- |
            | :heavy_check_mark: | The code formatting looks good! |

          check_for_duplicate: true
          check_for_stale: true
